# Домашнее задание к занятию "3. Введение. Экосистема. Архитектура. Жизненный цикл Docker контейнера"

## Как сдавать задания

Обязательными к выполнению являются задачи без указания звездочки. Их выполнение необходимо для получения зачета и диплома о профессиональной переподготовке.

Задачи со звездочкой (*) являются дополнительными задачами и/или задачами повышенной сложности. Они не являются обязательными к выполнению, но помогут вам глубже понять тему.

Домашнее задание выполните в файле readme.md в github репозитории. В личном кабинете отправьте на проверку ссылку на .md-файл в вашем репозитории.

Любые вопросы по решению задач задавайте в чате учебной группы.

---


## Важно!

Перед отправкой работы на проверку удаляйте неиспользуемые ресурсы.
Это важно для того, чтоб предупредить неконтролируемый расход средств, полученных в результате использования промокода.

Подробные рекомендации [здесь](https://github.com/netology-code/virt-homeworks/blob/virt-11/r/README.md)

---

## Задача 1

Сценарий выполения задачи:

- создайте свой репозиторий на https://hub.docker.com;
- выберете любой образ, который содержит веб-сервер Nginx;
- создайте свой fork образа;
- реализуйте функциональность:
запуск веб-сервера в фоне с индекс-страницей, содержащей HTML-код ниже:
```
<html>
<head>
Hey, Netology
</head>
<body>
<h1>I’m DevOps Engineer!</h1>
</body>
</html>
```
Опубликуйте созданный форк в своем репозитории и предоставьте ответ в виде ссылки на https://hub.docker.com/username_repo.

```
https://hub.docker.com/r/bootini1/05-virt-03-docker.1
```

## Задача 2

Посмотрите на сценарий ниже и ответьте на вопрос:
"Подходит ли в этом сценарии использование Docker контейнеров или лучше подойдет виртуальная машина, физическая машина? Может быть возможны разные варианты?"

Детально опишите и обоснуйте свой выбор.

--

Сценарий:

- Высоконагруженное монолитное java веб-приложение;
```
Контейнеризация не подойдет.Высоконагруженное приложение подразумевает размещение всего стека в одном месте. Его лучше разместить на отдельной ВМ с возможностью расширения пула ресурсов либо на физическом сервере в случае если нагрузка высокая и рациональнее выделить одтельный сервер.
```

- Nodejs веб-приложение;
```
Отлично подойдет контейнеризация, т.к. это среда для выполнения javascript-логики веб-приложения и не являеться самостоятельным, нужны другие элементы. 
```

- Мобильное приложение c версиями для Android и iOS;
```
Хорошо подходит под парадигму микросервисов, т.к. необходимо реализовать различную логику работы API платформы приложения со схожим функционалом, имеющим общую среду.
```

- Шина данных на базе Apache Kafka;
```
Так как это монилитное приложение на Java + Scala имеющее свою систему хранения данных для обеспечения управления различными БД. Обычно высоконагруженное и критическое в отказе. Рациональтее использовать отдельные кластер из ВМ для обеспечения  быстрого маштабирования путем добавления новых нод.
```

- Elasticsearch кластер для реализации логирования продуктивного веб-приложения - три ноды elasticsearch, два logstash и две ноды kibana;
```
Лечшее решение - контецнеризация. Этому способствует существущая реализация перечисленного ПО в виде контейнеров, простота использования, обЪединения в стек и реализации управления средой с предсказемым результатом.
```

- Мониторинг-стек на базе Prometheus и Grafana;
```
Prometeus - решение отлично встраивается в философию микросервисов, с возможностью добавлять различные блоки-экспортеры в виде отдельных доккер-контейнеров. Grafana - в свою очередь имеет также реализацию в виде контейнера docker и хорошо интегрируется. Все это позволяет как быстро организовать мониторинг так и гибко его настроивать.
```

- MongoDB, как основное хранилище данных для java-приложения;
```
В виду высокого потребления памяти самим приложением и последующми записями на диск данных, скорее всего это будет единственное приложение на сервере, нет резона использовать контейнер. Правильнее использовать Виртуализацию при наличии мощных серверов либо отдельные физические сервера. 
```

- Gitlab сервер для реализации CI/CD процессов и приватный (закрытый) Docker Registry.
```
Виртуализация или физический сервер, т.к. подразумевается хранение больших обьемов данных, что не вписываетсья в рамки легковесных контейнеров.
```

## Задача 3

- Запустите первый контейнер из образа ***centos*** c любым тэгом в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Запустите второй контейнер из образа ***debian*** в фоновом режиме, подключив папку ```/data``` из текущей рабочей директории на хостовой машине в ```/data``` контейнера;
- Подключитесь к первому контейнеру с помощью ```docker exec``` и создайте текстовый файл любого содержания в ```/data```;
- Добавьте еще один файл в папку ```/data``` на хостовой машине;
- Подключитесь во второй контейнер и отобразите листинг и содержание файлов в ```/data``` контейнера.

```bash
vagrant@server1:~/docker-wd$ sudo docker run -d -v ~/docker-wd/data/:/data centos-data sleep infinity
1aac0fd276283a37566f732fa942cf254b7e6f586a6fdcb70905dc0022a4075f
vagrant@server1:~/docker-wd$ sudo docker run -d -v ~/docker-wd/data/:/data debian-data sleep infinity
699feedf6ccbb90b3932eb9db67e474d4cb40f33cbbadf6691773e04d3a94666
vagrant@server1:~/docker-wd$ sudo docker ps
CONTAINER ID   IMAGE         COMMAND            CREATED         STATUS         PORTS     NAMES
699feedf6ccb   debian-data   "sleep infinity"   3 minutes ago   Up 3 minutes             laughing_blackburn
1aac0fd27628   centos-data   "sleep infinity"   4 minutes ago   Up 4 minutes             interesting_mendel
vagrant@server1:~/docker-wd$ sudo docker exec -it interesting_mendel bash
[root@1aac0fd27628 /]# echo "centos-data row" >> /data/1.txt
[root@1aac0fd27628 /]# exit
exit
vagrant@server1:~/docker-wd$ echo "host row" >> ~/docker-wd/data/2.txt
agrant@server1:~/docker-wd$ sudo docker exec -it laughing_blackburn bash
root@699feedf6ccb:/# ls /data/
1.txt  2.txt

```

## Задача 4 (*)

Воспроизвести практическую часть лекции самостоятельно.

Соберите Docker образ с Ansible, загрузите на Docker Hub и пришлите ссылку вместе с остальными ответами к задачам.


---

